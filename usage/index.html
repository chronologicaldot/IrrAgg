<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">   
    <link rel="shortcut icon" href="../img/favicon.ico">

    <title>Usage - IrrAgg Documentation</title>

    <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.018/css/hack.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../css/base.css" rel="stylesheet">
    <link href="../css/cinder.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/highlight.css">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="..">IrrAgg Documentation</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="..">Home</a>
                    </li>
                
                
                
                    <li class="active">
                        <a href="./">Usage</a>
                    </li>
                
                
                
                    <li >
                        <a href="../api/">API</a>
                    </li>
                
                
                
                    <li >
                        <a href="../examples/">Examples</a>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li >
                        <a rel="next" href="..">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../api/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="first-level active"><a href="#usage">Usage</a></li>
        
            <li class="second-level"><a href="#drawing-modes">Drawing Modes</a></li>
            
        
            <li class="second-level"><a href="#creating-and-using-iimage">Creating and Using IImage</a></li>
            
                <li class="third-level"><a href="#creating">Creating</a></li>
            
                <li class="third-level"><a href="#rendering">Rendering</a></li>
            
                <li class="third-level"><a href="#exporting">Exporting</a></li>
            
        
            <li class="second-level"><a href="#useful-objects-and-functions">Useful Objects and Functions</a></li>
            
                <li class="third-level"><a href="#standard-rendering-functions">Standard Rendering Functions</a></li>
            
                <li class="third-level"><a href="#standard-rendering-objects">Standard Rendering Objects</a></li>
            
                <li class="third-level"><a href="#engine-based-rendering">Engine-Based Rendering</a></li>
            
        
            <li class="second-level"><a href="#agg-vertex-sources">AGG Vertex Sources</a></li>
            
                <li class="third-level"><a href="#creating-a-standard-vertex-source">Creating a Standard Vertex Source</a></li>
            
                <li class="third-level"><a href="#implementing-pointsource">Implementing PointSource</a></li>
            
        
    
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<style type="text/css">
table {
    border: 1px solid #cccccc;
    background-color: #eeeeee;
    margin: 1em;
}
</style>

<h1 id="usage">Usage</h1>
<p>Much of IrrAgg revolves around rendering vector paths onto an IImage, an abstract object created using Irrlicht via IVideoDriver::createImage. Please see <a href="#creating-and-using-iimage">Creating and Using IImage</a> for more info.</p>
<p>Rendering to an IImage is can be done in one of two ways:</p>
<ol>
<li>via the function irr::vecg::renderVectorPath.</li>
<li>via the class irr::vecg::engine::RendererARGB32.</li>
</ol>
<p>Both methods can be used on the same IImage instance.</p>
<p>A number of other convenience functions and structures are available to aid in rendering with either approach. Please see <a href="#useful-objects-and-functions">Useful Objects and Functions</a>.</p>
<p>Most of your rendering needs can be done using pre-existing components, such as ArrayVertexSource. However, you may wish to create specialized classes for handling vertices. See <a href="#agg-vertex-sources">AGG Vertex Sources</a> for more details.</p>
<p><strong>WARNING:</strong> Using templates can hide bugs that only appear as segmentation faults. AGG uses templates for speed, but IrrAgg provides its rendering engine as an alternative to direct rendering (using renderVectorPath) to help prevent these hidden bugs.</p>
<h2 id="drawing-modes">Drawing Modes</h2>
<p>Anti-Grain Geometry provides various modes of drawing, most of which are not wrapped by this library.</p>
<p>There are three modes of drawing provided by IrrAgg: <em>NORMAL</em>, <em>BRUSH</em>, and <em>BSPLINE</em>. These are given as values of the enum <em>EPathStroke</em> (file: irragg_path_stroke.h) and can be passed to a number of rendering functions to indicate how the path should be drawn.</p>
<ul>
<li>NORMAL: Renders a solid, closed polygon.</li>
<li>BRUSH: Renders the vector path with lines. Functions rendering this way will also accept a <em>stroke width</em> value to determine how thick the lines will be.</li>
<li>BSPLINE: Renders a smooth curve. Functions rendering this way will also accept a <em>stroke width</em> value and a <em>resolution</em> value, which indicates how many segments should be used between primary points in order to smooth out the curve.</li>
</ul>
<h2 id="creating-and-using-iimage">Creating and Using IImage</h2>
<h3 id="creating">Creating</h3>
<p>An IImage is created using the <em>IVideoDriver</em> interface method <em>createImage</em>. Once the IImage has been created, you can render to it with IrrAgg functions. Currently, IrrAgg only supports the color format ECF_A8R8G8B8.</p>
<pre><code class="C++">irr::video::E_DRIVER_TYPE  driverType = irr::video::EDT_BURNINGSVIDEO;
irr::core::dimension2d  screenSize(1200, 800);
irr::core::dimension2d  imageSize(512, 512);

irr::IrrlichtDevice*  device = irr::createDevice(driverType, screenSize);
irr::IVideoDriver*  videoDriver = device-&gt;getVideoDriver();
irr::video::IImage*  image = videoDriver-&gt;createImage(irr::video::ECF_A8R8G8B8, imageSize);
</code></pre>

<h3 id="rendering">Rendering</h3>
<p>These images must be converted to driver textures prior to rendering. By default, Irrlicht will resize images to powers of 2. This can be changed by setting a driver feature. The following example is a continuation of the previous one and shows disabling mipmap creation, power-of-two resizing, and rendering.</p>
<pre><code class="C++">irr::video::ITexture*  texture;
irr::core::vectore2di  placeOnScreen(30,30);

videoDriver-&gt;setTextureCreationFlag(irr::video::ETCF_CREATE_MIP_MAPS, false);
videoDriver-&gt;setTextureCreationFlag(irr::video::ETCF_ALLOW_NON_POWER_2, true);
texture = videoDriver-&gt;addTexture(irr::io::path(&quot;texture name&quot;), image);

// ... Later, usually within the main rendering loop
videoDriver-&gt;draw2DImage(texture, placeOnScreen);
</code></pre>

<h3 id="exporting">Exporting</h3>
<p>An IImage can be written to file using the <em>IVideoDriver</em> interface of Irrlicht. Some common formats such as PNG and JPEG are supported. The following example illustrates how to do this and assumes the image creation example code has been used.</p>
<pre><code class="C++">videoDriver-&gt;writeImageToFile(image, irr::io::path(&quot;desired/file/path.png&quot;);
</code></pre>

<hr />
<h2 id="useful-objects-and-functions">Useful Objects and Functions</h2>
<p>All functions and objects belonging to IrrAgg are in the sub namespace "vecg" within the namespace "irr" with the exception of the matrix conversion functions.</p>
<h3 id="standard-rendering-functions">Standard Rendering Functions</h3>
<h4 id="function-list">Function List</h4>
<ul>
<li>renderVectorPath() &lt; class VertexSource &gt;</li>
<li>renderTriangle()</li>
<li>renderEllipse()</li>
<li>renderRoundedRectangle()</li>
</ul>
<h3 id="standard-rendering-objects">Standard Rendering Objects</h3>
<p>Most IrrAgg objects are intended to fulfill the role of VertexSource, which is a generic template name referring to any class with the following methods:
- void rewind( unsigned )
- unsigned vertex( double<em> x, double</em> y )</p>
<p>See <a href="#creating-a-standard-vertex-source">Creating a Standard Vertex Source</a> for more information.</p>
<h4 id="object-list">Object List</h4>
<ul>
<li>VertexSourceBase</li>
<li>VertexSourcePump &lt; class VertexSource &gt;</li>
<li>VertexSourceFuncPump</li>
<li>TrianglePath</li>
</ul>
<h3 id="engine-based-rendering">Engine-Based Rendering</h3>
<p>These utilities are form a simple, convenient package for rendering vector graphics.</p>
<h4 id="object-list_1">Object List</h4>
<ul>
<li>PointSource</li>
<li>RendererARGB32</li>
</ul>
<hr />
<h2 id="agg-vertex-sources">AGG Vertex Sources</h2>
<p>Nearly if not all of the functionality of AGG is based on templates. The basic rendering functions of IrrAgg - such as renderVectorPath - limit the need for templates but are templated in order to mimic the functionality of AGG. On the other hand, structures like RendererARGB32 are not templated and don't require any templates to perform rendering.</p>
<p>For rendering vectors, AGG requires a path of some sort. This path can be created from a standard vertex source (used with renderVectorPath) or by a class inheriting PointSource (and rendered with RendererARGB32).</p>
<h3 id="creating-a-standard-vertex-source">Creating a Standard Vertex Source</h3>
<p>In this method, the path of vertices for AGG is defined by user-created class with two special methods that are called within AGG. Such classes are called "vertex sources" because they control the vertices that define the path rendered by AGG. IrrAGG has a number of rendering functions that accept these "vertex sources.</p>
<p>The vertex source class must have the following two methods:</p>
<ul>
<li><em>unsigned vertex( double</em> x, double<em> y )</em></li>
<li><em>void rewind( unsigned )</em></li>
</ul>
<p>The vertex method must set the values of "x" and "y" and be "incremented". It must then return an unsigned integer represeting a flag. Flag values are:</p>
<ul>
<li><em>agg::path_cmd_move_to</em></li>
<li><em>agg::path_cmd_line_to</em></li>
<li><em>agg::path_cmd_end_poly</em></li>
<li><em>agg::path_cmd_stop</em></li>
</ul>
<p>The flag agg::path_cmd_stop must eventually be returned or AGG will run indefinitely.</p>
<h3 id="implementing-pointsource">Implementing PointSource</h3>
<p>In this method, the path of vertices for rendering is defined by the following virtual methods from class irr::vecg::PointSource:</p>
<ul>
<li>size_t <em>getPointCount</em>()</li>
<li>Point2D <em>getPoint</em>( unsigned <em>step</em> )</li>
</ul>
<p>Both of these methods should be overridden.</p>
<p>Rather than being passed directly to AGG or renderVectorPath, descendents of PointSource are passed to small rendering engines.</p>
<pre><code class="C++">
class MyShape : public irr::vecg::PointSource
{
public:
    virtual size_t
        getPointCount() const
    {
        return 5;
    }

    virtual irr::vecg::Point2D
        getPoint( unsigned  step )
    {
        switch(step) {
        case 0: return irr::vecg::Point2D(50, 30);
        case 1: return irr::vecg::Point2D(200, 50);
        case 2: return irr::vecg::Point2D(150, 300);
        case 3: return irr::vecg::Point2D(80, 200);
        default: return irr::vecg::Point2D(100,100);
        }
    }
};

int main()
{
    //...

    MyShape  shape;
    irr::vecg::engine::RendererARGB32  renderer;
    renderer.setRenderTarget( image );
    renderer.setDrawingColor( irr::video::SColor(0xffffffff) );
    renderer.bufferPoints( shape );
    renderer.draw();

    //...
}

</code></pre></div>
        
    </div>

    <footer class="col-md-12 text-center">
        <hr>
        <p>
        <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p></small>
    </footer>

    <script src="../js/jquery-1.10.2.min.js"></script>
    <script src="../js/bootstrap-3.0.3.min.js"></script>
    <script src="../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>
    var base_url = '..';
    </script>
    <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script>
    <script src="../js/base.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    </body>

</html>
